<!-- Name - Ashwin Anand
Student Id - 152042206 -->
<!DOCTYPE html>
<html lang="en">

    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
            integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
        <link rel="icon"
            href="https://mpng.subpng.com/20180629/ytb/kisspng-computer-icons-clip-art-web-globe-5b35d0b6693359.5423001015302534944309.jpg">
        <title>Hosting Plans | Web Hosting Services</title>
    </head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins&family=Quicksand:wght@400;600&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,600&display=swap');

        .plan {
            background-color: white;
            padding-top: 45px;
            padding-bottom: 70px;
            border: solid #ecebe7 10px;
        }

        .nav-link:hover {
            color: red !important;
        }

        .price {
            color: red;
            font-size: 30px;
            font-weight: bold;
        }

        .plan-details {
            list-style-type: none;
            padding: 0;
            margin-top: 16px;
            text-align: left;
            font-family: sans-serif;
        }

        .planAdded {
            color: Red;
        }

        .in-plan-details {
            margin: 10px;
            font-family: "Quicksand";
        }
    </style>
    <nav class="navbar navbar-expand navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="https://mpng.subpng.com/20180629/ytb/kisspng-computer-icons-clip-art-web-globe-5b35d0b6693359.5423001015302534944309.jpg"
                    alt="" width="50" height="54" class="d-inline-block">
                Web Hosting Services

            </a>

            <div id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" target="new" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/hosting-plans" target="new">Hosting Plans</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/becoming_member" target="new">Registration</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/login" target="new">Login</a>
                    </li>
                </ul>
            </div>
        </div>

    </nav>

    <body>
        <div class="container text-center">
            <div class="planAdded" id="planAdded">

            </div>
            <div class="col-md-4 offset-md-4  plan">
                <i class="fas fa-building" style="color:red; font-size:35px;"></i>
                <h2 id="planName" data-value="{{resObj.PlanType}}">{{resObj.PlanType}}</h2>
                {{#if resObj.mostPopular_}}
                    <strong style="color:red;">Most Popular</strong>
                    <br>
                {{/if}}
                {{resObj.Description}}

                <p class="text-muted" style="font-size: 14px; padding-top:15px;">starting at</p>
                <span class="price" id="price" data-value="{{resObj.Price}}">C${{resObj.Price}}</span>
                /mo<br>
                <button type="button" onclick="addToCart()" class="btn btn-lg btn-primary"
                    style="margin-top:20px; width:100%">Add to Cart</button>
                <ul class="plan-details">
                    <li class="in-plan-details">
                        <i class="fas fa-tachometer-alt" style="color:grey"></i>
                        <b>{{resObj.Performance}} </b> Performance
                        <i class="fas fa-star" style="color:yellow;"></i>
                        <i class="fas fa-star" style="color:yellow;"></i>
                        <i class="fas fa-star" style="color:yellow;"></i>
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-laptop" style="color:grey"></i>
                        <b>{{resObj.Websites}} </b> Websites
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-server" style="color:grey"></i>
                        <b>{{resObj.Space}} </b> Space
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-envelope" style="color:grey"></i>
                        <b>{{resObj.EmailAccounts}} </b> Email Accounts
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-lock" style="color:grey"></i>
                        <b>{{resObj.SSL}} SSL</b> Certificate
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-globe" style="color:grey"></i>
                        <b>{{resObj.Domain}}</b> Domain
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-gem" style="color:grey"></i>
                        <b>{{resObj.Features}} </b> Features
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-paper-plane" style="color:grey"></i>
                        <b>Email Marketing</b>
                        ({{resObj.EmailMarketing}} contacts)
                    </li>
                    <li class="in-plan-details">
                        <i class="fas fa-star" style="color:grey"></i>
                        <b>Dedicated</b> IP
                    </li>
                </ul>
            </div>
        </div>
        <script>
            function fetchFunction(url, method, data) {
                if (data) {
                    return fetch(url,
                        {
                            method: method,
                            headers: {
                                "content-type": "application/json",
                                'Accept': 'application/json'
                            },
                            body: data
                        }
                    ).then((res) => {
                        (res.ok) ? console.log("response ok") : console.log("response not ok");
                        const contentType = res.headers.get("content-type");
                        if (contentType && contentType.indexOf("application/json") !== -1) { // referenced from https://stackoverflow.com/questions/37121301/how-to-check-if-the-response-of-a-fetch-is-a-json-object-in-javascript
                            return res.json();
                        } else {
                            return res.text().then(text => {
                                return '';
                            });
                        }
                    }).then((json) => {
                        console.log("res");
                        return json;
                    });
                } else {
                    return fetch(url,
                        {
                            method: method,
                            headers: { "content-type": "application/json" }
                        }
                    ).then((res) => {
                        const contentType = res.headers.get("content-type");
                        if (contentType && contentType.indexOf("application/json") !== -1) {
                            return res.json();
                        } else {
                            return res.text().then(text => {
                                return '';
                            });
                        }
                    }).then((json) => {
                        return json;
                    });
                }
            }
            function addToCart() {
                var planName = document.getElementById("planName").getAttribute("data-value");
                var price = document.getElementById("price").getAttribute("data-value");

                let data = {
                    planName: planName,
                    price: price
                }
                let jsonData = JSON.stringify(data);
                fetchFunction("/api/add_to_cart", "POST", jsonData).then((data) => {
                    if (data) {
                        document.getElementById("planAdded").innerHTML = "This plan has been added to your shopping cart. Thanku!"
                            + "<br>" +
                            "<a href='/cart' target='new'>Go to your shopping cart</a>";

                    }
                    else {
                        document.getElementById("planAdded").innerHTML = "Please login before any purchase."
                            + "<br>" +
                            "<a href='/cart' target='new'>Login here</a>";
                    }
                })


            }
        </script>
    </body>